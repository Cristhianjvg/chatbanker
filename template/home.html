<!DOCTYPE html>
<html>
<head>
    <title>Chat Simple</title>
    <style>
        #chatbox {
            height: 200px;
            width: 300px;
            border: 1px solid black;
            padding: 10px;
            overflow-y: scroll;
        }
        #userInput {
            width: 200px;
        }
    </style>
</head>
<body>
    <div id="chatbox"></div>
    <input id="userInput" type="text" placeholder="Escribe un mensaje...">
    <button onclick="sendMessage()">Enviar</button>

    <script>
        function appendMessage(message, sender) {
            const chatbox = document.getElementById("chatbox");
            const messageDiv = document.createElement("div");
            messageDiv.textContent = `${sender}: ${message}`;
            chatbox.appendChild(messageDiv);
        }

        function sendMessage() {
            const userInput = document.getElementById("userInput");
            const userMessage = userInput.value;

            if (userMessage.trim() !== "") {
                // Agregar mensaje del usuario al chatbox
                appendMessage(userMessage, "Usuario");

                // Enviar mensaje al servidor Django para obtener respuesta del chatbot
                fetch(`/chatbot/?message=${encodeURIComponent(userMessage)}`)
                    .then(response => response.json())
                    .then(data => {
                        const botMessage = data.message;
                        // Agregar respuesta del chatbot al chatbox
                        appendMessage(botMessage, "ROBOT");
                    })
                    .catch(error => console.error("Error al enviar mensaje:", error));

                // Limpiar el campo de entrada del usuario
                userInput.value = "";
            }
        }
    </script>
</body>
</html>
